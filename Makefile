#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
# 0.0.1    macro Makefile
# Alexey Potehin <gnuplanet@gmail.com>, http://www.gnuplanet.ru/doc/cv
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
OUT_DIR  := bin

DIR_LIST := libdll liblib exe
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
.PHONY: help
help:
	@echo "use make [x32 | x32dbg | x32test | x64 | x64dbg | x64test | clean]";
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
.PHONY: clean
clean:
	@echo "clean";
	@if [ -e $(OUT_DIR) ]; then \
		rm -rf $(OUT_DIR); \
	fi
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
.PHONY: x32
x32:     | $(DIR_LIST)

	@for i in $(DIR_LIST); \
	do \
		cd $$i; \
		${MAKE} -s x32; \
		cd ..; \
	done

	@echo "ready x32";
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
.PHONY: x32dbg
x32dbg:  | $(DIR_LIST)

	@for i in $(DIR_LIST); \
	do \
		cd $$i; \
		${MAKE} -s x32dbg; \
		cd ..; \
	done

	@echo "ready x32dbg";
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
.PHONY: x32test
x32test: | $(DIR_LIST)

	@for i in $(DIR_LIST); \
	do \
		cd $$i; \
		${MAKE} -s x32test; \
		cd ..; \
	done

	@echo "ready x32test";
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
.PHONY: x64
x64:     | $(DIR_LIST)

	@for i in $(DIR_LIST); \
	do \
		cd $$i; \
		${MAKE} -s x64; \
		cd ..; \
	done

	@echo "ready x64";
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
.PHONY: x64dbg
x64dbg:  | $(DIR_LIST)

	@for i in $(DIR_LIST); \
	do \
		cd $$i; \
		${MAKE} -s x64dbg; \
		cd ..; \
	done

	@echo "ready x64dbg";
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
.PHONY: x64test
x64test: | $(DIR_LIST)

	@for i in $(DIR_LIST); \
	do \
		cd $$i; \
		${MAKE} -s x64test; \
		cd ..; \
	done

	@echo "ready x64test";
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
